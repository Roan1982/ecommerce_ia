{% extends "admin/base.html" %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">Inicio</a>
    &rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<div class="module">
    <h2>{{ title }}</h2>

    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <div class="config-section">
            <h3>Sitio Web</h3>
            <div class="form-group">
                <label for="sitio_activo">Sitio Activo:</label>
                <input type="checkbox" id="sitio_activo" name="sitio_activo" {% if configuraciones.sitio_activo %}checked{% endif %}>
                <small class="form-text text-muted">Desactivar para poner el sitio en mantenimiento</small>
            </div>

            <div class="form-group">
                <label for="registro_abierto">Registro Abierto:</label>
                <input type="checkbox" id="registro_abierto" name="registro_abierto" {% if configuraciones.registro_abierto %}checked{% endif %}>
                <small class="form-text text-muted">Permitir que nuevos usuarios se registren</small>
            </div>
        </div>

        <div class="config-section">
            <h3>Compras y Envíos</h3>
            <div class="form-group">
                <label for="envio_gratuito_minimo">Envío Gratuito Mínimo ($):</label>
                <input type="number" id="envio_gratuito_minimo" name="envio_gratuito_minimo" value="{{ configuraciones.envio_gratuito_minimo }}" min="0">
                <small class="form-text text-muted">Monto mínimo para envío gratuito</small>
            </div>
        </div>

        <div class="config-section">
            <h3>Impuestos y Moneda</h3>
            <div class="form-group">
                <label for="impuestos_activos">Impuestos Activos:</label>
                <input type="checkbox" id="impuestos_activos" name="impuestos_activos" {% if configuraciones.impuestos_activos %}checked{% endif %}>
                <small class="form-text text-muted">Calcular y mostrar impuestos en las compras</small>
            </div>

            <div class="form-group">
                <label for="moneda">Moneda:</label>
                <select id="moneda" name="moneda">
                    <option value="COP" {% if configuraciones.moneda == 'COP' %}selected{% endif %}>Peso Colombiano (COP)</option>
                    <option value="USD" {% if configuraciones.moneda == 'USD' %}selected{% endif %}>Dólar Estadounidense (USD)</option>
                    <option value="EUR" {% if configuraciones.moneda == 'EUR' %}selected{% endif %}>Euro (EUR)</option>
                </select>
            </div>
        </div>

        <div class="config-section">
            <h3>Notificaciones</h3>
            <div class="form-group">
                <label for="email_notificaciones">Notificaciones por Email:</label>
                <input type="checkbox" id="email_notificaciones" name="email_notificaciones" {% if configuraciones.email_notificaciones %}checked{% endif %}>
                <small class="form-text text-muted">Enviar notificaciones por email a los administradores</small>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Guardar Configuración</button>
            <a href="{% url 'admin:index' %}" class="btn btn-secondary">Cancelar</a>
        </div>
    </form>
</div>

<style>
.config-section {
    background: #f8f9fa;
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 5px;
    border: 1px solid #dee2e6;
}

.config-section h3 {
    margin-top: 0;
    margin-bottom: 15px;
    color: #495057;
    border-bottom: 1px solid #dee2e6;
    padding-bottom: 10px;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #495057;
}

.form-group input[type="checkbox"] {
    width: auto;
    margin-right: 10px;
}

.form-group input[type="number"],
.form-group select {
    width: 100%;
    max-width: 300px;
    padding: 8px 12px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-size: 14px;
}

.form-text {
    display: block;
    margin-top: 5px;
    color: #6c757d;
    font-size: 12px;
}

.form-actions {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #dee2e6;
    text-align: center;
}

.btn {
    display: inline-block;
    font-weight: 400;
    color: #212529;
    text-align: center;
    vertical-align: middle;
    cursor: pointer;
    background-color: transparent;
    border: 1px solid transparent;
    padding: 0.375rem 0.75rem;
    font-size: 1rem;
    line-height: 1.5;
    border-radius: 0.25rem;
    text-decoration: none;
    margin: 0 10px;
}

.btn-primary {
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
}

.btn-secondary {
    color: #fff;
    background-color: #6c757d;
    border-color: #6c757d;
}

.alert {
    position: relative;
    padding: 0.75rem 1.25rem;
    margin-bottom: 1rem;
    border: 1px solid transparent;
    border-radius: 0.25rem;
}

.alert-success {
    color: #155724;
    background-color: #d4edda;
    border-color: #c3e6cb;
}

.alert-danger {
    color: #721c24;
    background-color: #f8d7da;
    border-color: #f5c6cb;
}

.alert-warning {
    color: #856404;
    background-color: #fff3cd;
    border-color: #ffeaa7;
}

.alert-info {
    color: #0c5460;
    background-color: #d1ecf1;
    border-color: #bee5eb;
}
</style>
{% endblock %}